<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.1.2 (20260124.0452)
 -->
<!-- Title: dhcp_hook2 Pages: 1 -->
<svg width="1412pt" height="660pt"
 viewBox="0.00 0.00 1412.00 660.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 655.72)">
<title>dhcp_hook2</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-655.72 1408.3,-655.72 1408.3,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="702.15" y="-636.32" font-family="Helvetica,Arial,sans-serif" font-size="12.00">dhcp_hook2.sh — BMC DHCP Hook</text>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#cce5ff" stroke="#2255aa" cx="772.15" cy="-602.85" rx="86.13" ry="28.13"/>
<text xml:space="preserve" text-anchor="middle" x="772.15" y="-604.6" font-family="Helvetica,Arial,sans-serif" font-size="10.00">DHCP lease commit</text>
<text xml:space="preserve" text-anchor="middle" x="772.15" y="-593.35" font-family="Helvetica,Arial,sans-serif" font-size="10.00">IP · MAC · hostname</text>
</g>
<!-- filter -->
<g id="node2" class="node">
<title>filter</title>
<path fill="#fff3cd" stroke="#856404" d="M760.55,-526.64C760.55,-526.64 676.2,-504.26 676.2,-504.26 670.4,-502.73 670.4,-499.65 676.2,-498.11 676.2,-498.11 760.55,-475.73 760.55,-475.73 766.35,-474.2 777.95,-474.2 783.75,-475.73 783.75,-475.73 868.1,-498.11 868.1,-498.11 873.9,-499.65 873.9,-502.73 868.1,-504.26 868.1,-504.26 783.75,-526.64 783.75,-526.64 777.95,-528.18 766.35,-528.18 760.55,-526.64"/>
<text xml:space="preserve" text-anchor="middle" x="772.15" y="-497.31" font-family="Helvetica,Arial,sans-serif" font-size="10.00">BMC OUI match?</text>
</g>
<!-- start&#45;&gt;filter -->
<g id="edge1" class="edge">
<title>start&#45;&gt;filter</title>
<path fill="none" stroke="#555555" d="M772.15,-574.35C772.15,-563.55 772.15,-550.98 772.15,-539.39"/>
<polygon fill="#555555" stroke="#555555" points="774.95,-539.45 772.15,-531.45 769.35,-539.45 774.95,-539.45"/>
</g>
<!-- lookup -->
<g id="node3" class="node">
<title>lookup</title>
<path fill="#fff3cd" stroke="#856404" d="M657.65,-415.47C657.65,-415.47 547.6,-382.56 547.6,-382.56 541.85,-380.85 541.85,-377.41 547.6,-375.69 547.6,-375.69 657.65,-342.78 657.65,-342.78 663.4,-341.07 674.9,-341.07 680.65,-342.78 680.65,-342.78 790.7,-375.69 790.7,-375.69 796.45,-377.41 796.45,-380.85 790.7,-382.56 790.7,-382.56 680.65,-415.47 680.65,-415.47 674.9,-417.19 663.4,-417.19 657.65,-415.47"/>
<text xml:space="preserve" text-anchor="middle" x="669.15" y="-380.88" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Device found in NetBox</text>
<text xml:space="preserve" text-anchor="middle" x="669.15" y="-369.63" font-family="Helvetica,Arial,sans-serif" font-size="10.00">by MAC address?</text>
</g>
<!-- filter&#45;&gt;lookup -->
<g id="edge3" class="edge">
<title>filter&#45;&gt;lookup</title>
<path fill="none" stroke="#555555" d="M752.78,-477.61C738.45,-460.91 718.61,-437.77 701.84,-418.23"/>
<polygon fill="#555555" stroke="#555555" points="704.14,-416.61 696.81,-412.37 699.89,-420.26 704.14,-416.61"/>
<text xml:space="preserve" text-anchor="middle" x="733.94" y="-442.11" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- ignore -->
<g id="node11" class="node">
<title>ignore</title>
<ellipse fill="#eeeeee" stroke="#888888" cx="855.15" cy="-257.07" rx="41.58" ry="28.13"/>
<text xml:space="preserve" text-anchor="middle" x="855.15" y="-258.82" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Ignore</text>
<text xml:space="preserve" text-anchor="middle" x="855.15" y="-247.57" font-family="Helvetica,Arial,sans-serif" font-size="10.00">(exit 0)</text>
</g>
<!-- filter&#45;&gt;ignore -->
<g id="edge2" class="edge">
<title>filter&#45;&gt;ignore</title>
<path fill="none" stroke="#888888" d="M788.77,-476.68C799.16,-460.98 812.07,-439.5 820.15,-418.91 836.2,-377.99 845.6,-328.17 850.55,-294.93"/>
<polygon fill="#888888" stroke="#888888" points="853.31,-295.41 851.67,-287.09 847.76,-294.61 853.31,-295.41"/>
<text xml:space="preserve" text-anchor="middle" x="847.85" y="-375.45" font-family="Helvetica,Arial,sans-serif" font-size="9.00" fill="#888888">no</text>
</g>
<!-- state -->
<g id="node4" class="node">
<title>state</title>
<path fill="#ffe0b2" stroke="#e65100" d="M657.72,-281.95C657.72,-281.95 591.03,-260.71 591.03,-260.71 585.32,-258.89 585.32,-255.25 591.03,-253.42 591.03,-253.42 657.72,-232.18 657.72,-232.18 663.43,-230.36 674.87,-230.36 680.58,-232.18 680.58,-232.18 747.27,-253.42 747.27,-253.42 752.98,-255.25 752.98,-258.89 747.27,-260.71 747.27,-260.71 680.58,-281.95 680.58,-281.95 674.87,-283.78 663.43,-283.78 657.72,-281.95"/>
<text xml:space="preserve" text-anchor="middle" x="669.15" y="-253.19" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Device state?</text>
</g>
<!-- lookup&#45;&gt;state -->
<g id="edge5" class="edge">
<title>lookup&#45;&gt;state</title>
<path fill="none" stroke="#555555" d="M669.15,-339.15C669.15,-325.02 669.15,-309.1 669.15,-295.14"/>
<polygon fill="#555555" stroke="#555555" points="671.95,-295.35 669.15,-287.35 666.35,-295.35 671.95,-295.35"/>
<text xml:space="preserve" text-anchor="middle" x="680.77" y="-308.8" font-family="Helvetica,Arial,sans-serif" font-size="9.00">found</text>
</g>
<!-- lookup&#45;&gt;ignore -->
<g id="edge4" class="edge">
<title>lookup&#45;&gt;ignore</title>
<path fill="none" stroke="#888888" d="M710.43,-351.48C742.59,-330.72 786.86,-302.15 817.94,-282.09"/>
<polygon fill="#888888" stroke="#888888" points="819.07,-284.69 824.27,-278 816.03,-279.99 819.07,-284.69"/>
<text xml:space="preserve" text-anchor="middle" x="792.41" y="-308.8" font-family="Helvetica,Arial,sans-serif" font-size="9.00" fill="#888888">not found</text>
</g>
<!-- act_offline -->
<g id="node5" class="node">
<title>act_offline</title>
<path fill="#e3f2fd" stroke="#1565c0" d="M192.3,-165.04C192.3,-165.04 12,-165.04 12,-165.04 6,-165.04 0,-159.04 0,-153.04 0,-153.04 0,-113.26 0,-113.26 0,-107.26 6,-101.26 12,-101.26 12,-101.26 192.3,-101.26 192.3,-101.26 198.3,-101.26 204.3,-107.26 204.3,-113.26 204.3,-113.26 204.3,-153.04 204.3,-153.04 204.3,-159.04 198.3,-165.04 192.3,-165.04"/>
<text xml:space="preserve" text-anchor="middle" x="102.15" y="-146.9" font-family="Helvetica,Arial,sans-serif" font-size="10.00">offline</text>
<text xml:space="preserve" text-anchor="middle" x="102.15" y="-135.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="102.15" y="-124.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Promote → discovered</text>
<text xml:space="preserve" text-anchor="middle" x="102.15" y="-111.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Assign BMC IP</text>
</g>
<!-- state&#45;&gt;act_offline -->
<g id="edge6" class="edge">
<title>state&#45;&gt;act_offline</title>
<path fill="none" stroke="#555555" d="M613.9,-245.76C529.28,-229.75 362.61,-197.4 222.15,-165.04 219.36,-164.39 216.53,-163.73 213.68,-163.06"/>
<polygon fill="#555555" stroke="#555555" points="214.42,-160.36 205.99,-161.22 213.12,-165.81 214.42,-160.36"/>
<text xml:space="preserve" text-anchor="middle" x="418.21" y="-193.11" font-family="Helvetica,Arial,sans-serif" font-size="9.00">offline</text>
</g>
<!-- act_discovered -->
<g id="node6" class="node">
<title>act_discovered</title>
<path fill="#e0f7fa" stroke="#00695c" d="M432.3,-158.66C432.3,-158.66 252,-158.66 252,-158.66 246,-158.66 240,-152.66 240,-146.66 240,-146.66 240,-119.63 240,-119.63 240,-113.63 246,-107.63 252,-107.63 252,-107.63 432.3,-107.63 432.3,-107.63 438.3,-107.63 444.3,-113.63 444.3,-119.63 444.3,-119.63 444.3,-146.66 444.3,-146.66 444.3,-152.66 438.3,-158.66 432.3,-158.66"/>
<text xml:space="preserve" text-anchor="middle" x="342.15" y="-140.52" font-family="Helvetica,Arial,sans-serif" font-size="10.00">discovered</text>
<text xml:space="preserve" text-anchor="middle" x="342.15" y="-129.27" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="342.15" y="-118.02" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Refresh BMC IP</text>
</g>
<!-- state&#45;&gt;act_discovered -->
<g id="edge7" class="edge">
<title>state&#45;&gt;act_discovered</title>
<path fill="none" stroke="#555555" d="M628.73,-241C576.23,-221.42 483.56,-186.87 417.82,-162.36"/>
<polygon fill="#555555" stroke="#555555" points="419.03,-159.82 410.56,-159.65 417.07,-165.07 419.03,-159.82"/>
<text xml:space="preserve" text-anchor="middle" x="557.44" y="-193.11" font-family="Helvetica,Arial,sans-serif" font-size="9.00">discovered</text>
</g>
<!-- act_active_none -->
<g id="node7" class="node">
<title>act_active_none</title>
<path fill="#e8f5e9" stroke="#2e7d32" d="M672.3,-164.29C672.3,-164.29 492,-164.29 492,-164.29 486,-164.29 480,-158.29 480,-152.29 480,-152.29 480,-114.01 480,-114.01 480,-108.01 486,-102.01 492,-102.01 492,-102.01 672.3,-102.01 672.3,-102.01 678.3,-102.01 684.3,-108.01 684.3,-114.01 684.3,-114.01 684.3,-152.29 684.3,-152.29 684.3,-158.29 678.3,-164.29 672.3,-164.29"/>
<text xml:space="preserve" text-anchor="middle" x="582.15" y="-146.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">active · no IP on record</text>
<text xml:space="preserve" text-anchor="middle" x="582.15" y="-134.9" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="582.15" y="-123.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Assign BMC IP</text>
<text xml:space="preserve" text-anchor="middle" x="582.15" y="-112.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Journal: IP assigned</text>
</g>
<!-- state&#45;&gt;act_active_none -->
<g id="edge8" class="edge">
<title>state&#45;&gt;act_active_none</title>
<path fill="none" stroke="#555555" d="M652.99,-233.42C640.7,-216.2 623.52,-192.12 609.15,-171.99"/>
<polygon fill="#555555" stroke="#555555" points="611.61,-170.61 604.68,-165.72 607.05,-173.86 611.61,-170.61"/>
<text xml:space="preserve" text-anchor="middle" x="667.57" y="-197.99" font-family="Helvetica,Arial,sans-serif" font-size="9.00">active</text>
<text xml:space="preserve" text-anchor="middle" x="667.57" y="-188.24" font-family="Helvetica,Arial,sans-serif" font-size="9.00">(no IP on record)</text>
</g>
<!-- act_active_ok -->
<g id="node8" class="node">
<title>act_active_ok</title>
<path fill="#d4edda" stroke="#28a745" d="M912.3,-158.66C912.3,-158.66 732,-158.66 732,-158.66 726,-158.66 720,-152.66 720,-146.66 720,-146.66 720,-119.63 720,-119.63 720,-113.63 726,-107.63 732,-107.63 732,-107.63 912.3,-107.63 912.3,-107.63 918.3,-107.63 924.3,-113.63 924.3,-119.63 924.3,-119.63 924.3,-146.66 924.3,-146.66 924.3,-152.66 918.3,-158.66 912.3,-158.66"/>
<text xml:space="preserve" text-anchor="middle" x="822.15" y="-140.52" font-family="Helvetica,Arial,sans-serif" font-size="10.00">active · IP matches</text>
<text xml:space="preserve" text-anchor="middle" x="822.15" y="-129.27" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="822.15" y="-118.02" font-family="Helvetica,Arial,sans-serif" font-size="10.00">No action</text>
</g>
<!-- state&#45;&gt;act_active_ok -->
<g id="edge9" class="edge">
<title>state&#45;&gt;act_active_ok</title>
<path fill="none" stroke="#555555" d="M694.07,-236.21C718.32,-216.88 755.52,-187.24 783.59,-164.87"/>
<polygon fill="#555555" stroke="#555555" points="785.19,-167.18 789.7,-160.01 781.7,-162.8 785.19,-167.18"/>
<text xml:space="preserve" text-anchor="middle" x="780.31" y="-197.99" font-family="Helvetica,Arial,sans-serif" font-size="9.00">active</text>
<text xml:space="preserve" text-anchor="middle" x="780.31" y="-188.24" font-family="Helvetica,Arial,sans-serif" font-size="9.00">(IP matches)</text>
</g>
<!-- act_active_mismatch -->
<g id="node9" class="node">
<title>act_active_mismatch</title>
<path fill="#fff9c4" stroke="#856404" d="M1152.3,-164.29C1152.3,-164.29 972,-164.29 972,-164.29 966,-164.29 960,-158.29 960,-152.29 960,-152.29 960,-114.01 960,-114.01 960,-108.01 966,-102.01 972,-102.01 972,-102.01 1152.3,-102.01 1152.3,-102.01 1158.3,-102.01 1164.3,-108.01 1164.3,-114.01 1164.3,-114.01 1164.3,-152.29 1164.3,-152.29 1164.3,-158.29 1158.3,-164.29 1152.3,-164.29"/>
<text xml:space="preserve" text-anchor="middle" x="1062.15" y="-146.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">active · IP mismatch</text>
<text xml:space="preserve" text-anchor="middle" x="1062.15" y="-134.9" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="1062.15" y="-123.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Journal warning</text>
<text xml:space="preserve" text-anchor="middle" x="1062.15" y="-112.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">No change to NetBox</text>
</g>
<!-- state&#45;&gt;act_active_mismatch -->
<g id="edge10" class="edge">
<title>state&#45;&gt;act_active_mismatch</title>
<path fill="none" stroke="#555555" d="M713.47,-242.32C771.55,-224.3 875.35,-192.1 954.64,-167.5"/>
<polygon fill="#555555" stroke="#555555" points="955.43,-170.19 962.24,-165.14 953.77,-164.84 955.43,-170.19"/>
<text xml:space="preserve" text-anchor="middle" x="916.93" y="-197.99" font-family="Helvetica,Arial,sans-serif" font-size="9.00">active</text>
<text xml:space="preserve" text-anchor="middle" x="916.93" y="-188.24" font-family="Helvetica,Arial,sans-serif" font-size="9.00">(IP mismatch)</text>
</g>
<!-- act_nomatch -->
<g id="node10" class="node">
<title>act_nomatch</title>
<path fill="#fff9c4" stroke="#856404" d="M1392.3,-164.29C1392.3,-164.29 1212,-164.29 1212,-164.29 1206,-164.29 1200,-158.29 1200,-152.29 1200,-152.29 1200,-114.01 1200,-114.01 1200,-108.01 1206,-102.01 1212,-102.01 1212,-102.01 1392.3,-102.01 1392.3,-102.01 1398.3,-102.01 1404.3,-108.01 1404.3,-114.01 1404.3,-114.01 1404.3,-152.29 1404.3,-152.29 1404.3,-158.29 1398.3,-164.29 1392.3,-164.29"/>
<text xml:space="preserve" text-anchor="middle" x="1302.15" y="-146.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">No FSM transition</text>
<text xml:space="preserve" text-anchor="middle" x="1302.15" y="-134.9" font-family="Helvetica,Arial,sans-serif" font-size="10.00">for this state</text>
<text xml:space="preserve" text-anchor="middle" x="1302.15" y="-123.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">──────────────────</text>
<text xml:space="preserve" text-anchor="middle" x="1302.15" y="-112.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Journal warning</text>
</g>
<!-- state&#45;&gt;act_nomatch -->
<g id="edge11" class="edge">
<title>state&#45;&gt;act_nomatch</title>
<path fill="none" stroke="#888888" d="M719.55,-244.12C742.53,-238.91 770.13,-232.99 795.15,-228.54 865.38,-216.03 883.71,-217.82 954.15,-206.54 1055.85,-190.25 1081.55,-187.11 1182.15,-165.04 1184.95,-164.42 1187.78,-163.79 1190.64,-163.14"/>
<polygon fill="#888888" stroke="#888888" points="1191.18,-165.89 1198.34,-161.36 1189.92,-160.43 1191.18,-165.89"/>
<text xml:space="preserve" text-anchor="middle" x="1093.74" y="-193.11" font-family="Helvetica,Arial,sans-serif" font-size="9.00" fill="#888888">other state</text>
</g>
<!-- done -->
<g id="node12" class="node">
<title>done</title>
<ellipse fill="#d4edda" stroke="#28a745" cx="701.15" cy="-28.13" rx="41.58" ry="28.13"/>
<text xml:space="preserve" text-anchor="middle" x="701.15" y="-29.88" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Done</text>
<text xml:space="preserve" text-anchor="middle" x="701.15" y="-18.63" font-family="Helvetica,Arial,sans-serif" font-size="10.00">(exit 0)</text>
</g>
<!-- act_offline&#45;&gt;done -->
<g id="edge12" class="edge">
<title>act_offline&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M204.76,-105C210.63,-103.67 216.46,-102.42 222.15,-101.26 377.24,-69.71 563.17,-45.56 650.78,-34.99"/>
<polygon fill="#555555" stroke="#555555" points="651.1,-37.77 658.71,-34.04 650.43,-32.21 651.1,-37.77"/>
</g>
<!-- act_discovered&#45;&gt;done -->
<g id="edge13" class="edge">
<title>act_discovered&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M429.05,-107.21C499.82,-86.9 597.03,-59.01 654.06,-42.64"/>
<polygon fill="#555555" stroke="#555555" points="654.83,-45.34 661.74,-40.44 653.28,-39.95 654.83,-45.34"/>
</g>
<!-- act_active_none&#45;&gt;done -->
<g id="edge14" class="edge">
<title>act_active_none&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M617.53,-101.52C633.81,-87.42 652.99,-70.82 668.87,-57.07"/>
<polygon fill="#555555" stroke="#555555" points="670.55,-59.32 674.77,-51.97 666.89,-55.09 670.55,-59.32"/>
</g>
<!-- act_active_ok&#45;&gt;done -->
<g id="edge15" class="edge">
<title>act_active_ok&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M792.86,-107.21C774.95,-91.96 752.02,-72.44 733.57,-56.73"/>
<polygon fill="#555555" stroke="#555555" points="735.54,-54.73 727.64,-51.68 731.91,-59 735.54,-54.73"/>
</g>
<!-- act_active_mismatch&#45;&gt;done -->
<g id="edge16" class="edge">
<title>act_active_mismatch&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M959.67,-102.9C890.11,-83.05 801.41,-57.74 748.06,-42.52"/>
<polygon fill="#555555" stroke="#555555" points="749.09,-39.9 740.63,-40.39 747.55,-45.28 749.09,-39.9"/>
</g>
<!-- act_nomatch&#45;&gt;done -->
<g id="edge17" class="edge">
<title>act_nomatch&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M1199.54,-104.99C1193.67,-103.67 1187.84,-102.41 1182.15,-101.26 1026.26,-69.59 839.33,-45.47 751.46,-34.94"/>
<polygon fill="#555555" stroke="#555555" points="752.04,-32.19 743.76,-34.02 751.37,-37.75 752.04,-32.19"/>
</g>
</g>
</svg>
