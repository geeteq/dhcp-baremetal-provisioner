<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.1.2 (20260124.0452)
 -->
<!-- Title: bmc_discovery Pages: 1 -->
<svg width="1385pt" height="2385pt"
 viewBox="0.00 0.00 1385.00 2385.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2381.27)">
<title>bmc_discovery</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-2381.27 1380.83,-2381.27 1380.83,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="688.42" y="-2361.87" font-family="Helvetica,Arial,sans-serif" font-size="12.00">BMC Discovery — DHCP → NetBox</text>
<text xml:space="preserve" text-anchor="middle" x="688.42" y="-2347.62" font-family="Helvetica,Arial,sans-serif" font-size="12.00">dhcp_hook2.sh &#160;| &#160;netbox&#45;bmc&#45;worker.sh</text>
<g id="clust1" class="cluster">
<title>cluster_hook</title>
<polygon fill="#eef6ff" stroke="#2255aa" points="947,-1644.65 947,-2219.58 1279,-2219.58 1279,-1644.65 947,-1644.65"/>
<text xml:space="preserve" text-anchor="middle" x="1113" y="-2203.23" font-family="Helvetica,Arial,sans-serif" font-size="13.00" fill="#2255aa">dhcp_hook2.sh</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_worker</title>
<polygon fill="#efffef" stroke="#1a6b1a" points="279,-1518.95 279,-2334.27 705,-2334.27 705,-1518.95 279,-1518.95"/>
<text xml:space="preserve" text-anchor="middle" x="492" y="-2317.92" font-family="Helvetica,Arial,sans-serif" font-size="13.00" fill="#1a6b1a">netbox&#45;bmc&#45;worker.sh</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_find</title>
<polygon fill="#f5eeff" stroke="#6625a8" points="713,-1129.7 713,-1592.45 1086,-1592.45 1086,-1129.7 713,-1129.7"/>
<text xml:space="preserve" text-anchor="middle" x="899.5" y="-1576.1" font-family="Helvetica,Arial,sans-serif" font-size="13.00" fill="#6625a8">nb_find_device_by_bmc_mac()</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_active</title>
<polygon fill="#e8f5e9" stroke="#2e7d32" points="8,-82.9 8,-523.27 444,-523.27 444,-82.9 8,-82.9"/>
<text xml:space="preserve" text-anchor="middle" x="226" y="-507.87" font-family="Helvetica,Arial,sans-serif" font-size="12.00">State: active &#160;(live device — BMC IP refresh only)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_offline</title>
<polygon fill="#e3f2fd" stroke="#1565c0" points="1018,-82.9 1018,-746.95 1319,-746.95 1319,-82.9 1018,-82.9"/>
<text xml:space="preserve" text-anchor="middle" x="1168.5" y="-731.55" font-family="Helvetica,Arial,sans-serif" font-size="12.00">State: offline &#160;(new device — full onboarding)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_discovered</title>
<polygon fill="#e0f7fa" stroke="#00695c" points="468,-82.9 468,-628.3 769,-628.3 769,-82.9 468,-82.9"/>
<text xml:space="preserve" text-anchor="middle" x="618.5" y="-612.9" font-family="Helvetica,Arial,sans-serif" font-size="12.00">State: discovered &#160;(already seen — refresh IP)</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_other</title>
<polygon fill="#fff3e0" stroke="#bf360c" points="777,-77.27 777,-173.42 1010,-173.42 1010,-77.27 777,-77.27"/>
<text xml:space="preserve" text-anchor="middle" x="893.5" y="-158.02" font-family="Helvetica,Arial,sans-serif" font-size="12.00">State: * &#160;(unexpected — no state change)</text>
</g>
<!-- exit_ok -->
<g id="node1" class="node">
<title>exit_ok</title>
<ellipse fill="#d4edda" stroke="#28a745" cx="1221" cy="-814.35" rx="36.36" ry="18.14"/>
<text xml:space="preserve" text-anchor="middle" x="1221" y="-810.47" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Exit 0</text>
</g>
<!-- exit_err -->
<g id="node2" class="node">
<title>exit_err</title>
<ellipse fill="#f8d7da" stroke="#dc3545" cx="855" cy="-1922.95" rx="36.36" ry="18.14"/>
<text xml:space="preserve" text-anchor="middle" x="855" y="-1919.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Exit 1</text>
</g>
<!-- done -->
<g id="node3" class="node">
<title>done</title>
<ellipse fill="#d4edda" stroke="#28a745" cx="756" cy="-18.14" rx="34.77" ry="18.14"/>
<text xml:space="preserve" text-anchor="middle" x="756" y="-14.26" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Done</text>
</g>
<!-- w_loop -->
<g id="node14" class="node">
<title>w_loop</title>
<ellipse fill="#c3e6cb" stroke="#155724" cx="433" cy="-2043.25" rx="48.03" ry="18.14"/>
<text xml:space="preserve" text-anchor="middle" x="433" y="-2039.37" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Main loop</text>
</g>
<!-- done&#45;&gt;w_loop -->
<g id="edge58" class="edge">
<title>done&#45;&gt;w_loop</title>
<path fill="none" stroke="#888888" stroke-dasharray="5,2" d="M790.88,-20.16C908.57,-23.95 1285.78,-39.02 1323,-77.27 1426.46,-183.59 1348,-261.77 1348,-410.12 1348,-642.17 1348,-642.17 1348,-642.17 1348,-735.59 1330.88,-763.69 1277,-840 1217.65,-924.06 1156.02,-911.45 1115.75,-1006.15 1064.74,-1126.12 1187.37,-1499.46 1096,-1592.45 1083.84,-1604.83 955.11,-1591.91 940,-1600.45 760.34,-1701.93 857.22,-1883.67 676,-1982.35 607.05,-2019.89 575.74,-1982.32 501,-2006.35 488.64,-2010.32 475.87,-2016.45 464.77,-2022.53"/>
<polygon fill="#888888" stroke="#888888" points="463.54,-2020.01 457.96,-2026.39 466.3,-2024.88 463.54,-2020.01"/>
<text xml:space="preserve" text-anchor="middle" x="1152.88" y="-1039.37" font-family="Helvetica,Arial,sans-serif" font-size="9.00">worker: next event</text>
</g>
<!-- h_start -->
<g id="node4" class="node">
<title>h_start</title>
<ellipse fill="#cce5ff" stroke="#2255aa" cx="1080" cy="-2163.99" rx="114.85" ry="26.09"/>
<text xml:space="preserve" text-anchor="middle" x="1080" y="-2165.74" font-family="Helvetica,Arial,sans-serif" font-size="10.00">dhcpd executes hook</text>
<text xml:space="preserve" text-anchor="middle" x="1080" y="-2154.49" font-family="Helvetica,Arial,sans-serif" font-size="10.00">$1=IP &#160;$2=MAC &#160;$3=hostname</text>
</g>
<!-- h_valid -->
<g id="node5" class="node">
<title>h_valid</title>
<path fill="#fff3cd" stroke="#856404" d="M1069.11,-2075.12C1069.11,-2075.12 1010.97,-2048.28 1010.97,-2048.28 1005.53,-2045.76 1005.53,-2040.73 1010.97,-2038.22 1010.97,-2038.22 1069.11,-2011.38 1069.11,-2011.38 1074.55,-2008.86 1085.45,-2008.86 1090.89,-2011.38 1090.89,-2011.38 1149.03,-2038.22 1149.03,-2038.22 1154.47,-2040.73 1154.47,-2045.76 1149.03,-2048.28 1149.03,-2048.28 1090.89,-2075.12 1090.89,-2075.12 1085.45,-2077.63 1074.55,-2077.63 1069.11,-2075.12"/>
<text xml:space="preserve" text-anchor="middle" x="1080" y="-2045" font-family="Helvetica,Arial,sans-serif" font-size="10.00">IP and MAC</text>
<text xml:space="preserve" text-anchor="middle" x="1080" y="-2033.75" font-family="Helvetica,Arial,sans-serif" font-size="10.00">not empty?</text>
</g>
<!-- h_start&#45;&gt;h_valid -->
<g id="edge1" class="edge">
<title>h_start&#45;&gt;h_valid</title>
<path fill="none" stroke="#555555" d="M1080,-2137.52C1080,-2123.62 1080,-2105.99 1080,-2089.81"/>
<polygon fill="#555555" stroke="#555555" points="1082.8,-2090.01 1080,-2082.01 1077.2,-2090.01 1082.8,-2090.01"/>
</g>
<!-- h_err -->
<g id="node6" class="node">
<title>h_err</title>
<path fill="#f8d7da" stroke="#721c24" d="M1259.46,-1940.95C1259.46,-1940.95 1158.54,-1940.95 1158.54,-1940.95 1152.54,-1940.95 1146.54,-1934.95 1146.54,-1928.95 1146.54,-1928.95 1146.54,-1916.95 1146.54,-1916.95 1146.54,-1910.95 1152.54,-1904.95 1158.54,-1904.95 1158.54,-1904.95 1259.46,-1904.95 1259.46,-1904.95 1265.46,-1904.95 1271.46,-1910.95 1271.46,-1916.95 1271.46,-1916.95 1271.46,-1928.95 1271.46,-1928.95 1271.46,-1934.95 1265.46,-1940.95 1259.46,-1940.95"/>
<text xml:space="preserve" text-anchor="middle" x="1209" y="-1919.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_error: missing args</text>
</g>
<!-- h_valid&#45;&gt;h_err -->
<g id="edge2" class="edge">
<title>h_valid&#45;&gt;h_err</title>
<path fill="none" stroke="#555555" d="M1106.42,-2018.02C1128.9,-1997.41 1161,-1967.97 1183.28,-1947.54"/>
<polygon fill="#555555" stroke="#555555" points="1185.02,-1949.74 1189.03,-1942.27 1181.24,-1945.61 1185.02,-1949.74"/>
<text xml:space="preserve" text-anchor="middle" x="1157.47" y="-1973.8" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- h_norm -->
<g id="node7" class="node">
<title>h_norm</title>
<path fill="#e8f4f8" stroke="#446688" d="M1094.59,-1941.4C1094.59,-1941.4 967.41,-1941.4 967.41,-1941.4 961.41,-1941.4 955.41,-1935.4 955.41,-1929.4 955.41,-1929.4 955.41,-1916.5 955.41,-1916.5 955.41,-1910.5 961.41,-1904.5 967.41,-1904.5 967.41,-1904.5 1094.59,-1904.5 1094.59,-1904.5 1100.59,-1904.5 1106.59,-1910.5 1106.59,-1916.5 1106.59,-1916.5 1106.59,-1929.4 1106.59,-1929.4 1106.59,-1935.4 1100.59,-1941.4 1094.59,-1941.4"/>
<text xml:space="preserve" text-anchor="middle" x="1031" y="-1924.7" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Normalize MAC</text>
<text xml:space="preserve" text-anchor="middle" x="1031" y="-1913.45" font-family="Helvetica,Arial,sans-serif" font-size="10.00">lower&#45;case · colon&#45;separated</text>
</g>
<!-- h_valid&#45;&gt;h_norm -->
<g id="edge3" class="edge">
<title>h_valid&#45;&gt;h_norm</title>
<path fill="none" stroke="#555555" d="M1067.38,-2011.78C1059.49,-1992.72 1049.42,-1968.42 1041.88,-1950.21"/>
<polygon fill="#555555" stroke="#555555" points="1044.62,-1949.53 1038.98,-1943.21 1039.45,-1951.67 1044.62,-1949.53"/>
<text xml:space="preserve" text-anchor="middle" x="1061.16" y="-1973.8" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- h_err&#45;&gt;exit_ok -->
<g id="edge4" class="edge">
<title>h_err&#45;&gt;exit_ok</title>
<path fill="none" stroke="#555555" d="M1235.69,-1904.51C1263.48,-1884.01 1303,-1847.2 1303,-1803.65 1303,-1803.65 1303,-1803.65 1303,-917.7 1303,-882.77 1273.56,-852.95 1249.96,-834.66"/>
<polygon fill="#555555" stroke="#555555" points="1251.85,-832.58 1243.76,-830.04 1248.5,-837.07 1251.85,-832.58"/>
</g>
<!-- h_oui -->
<g id="node8" class="node">
<title>h_oui</title>
<path fill="#fff3cd" stroke="#856404" d="M1059.57,-1835.91C1059.57,-1835.91 966.51,-1806.29 966.51,-1806.29 960.8,-1804.47 960.8,-1800.83 966.51,-1799.01 966.51,-1799.01 1059.57,-1769.39 1059.57,-1769.39 1065.28,-1767.57 1076.72,-1767.57 1082.43,-1769.39 1082.43,-1769.39 1175.49,-1799.01 1175.49,-1799.01 1181.2,-1800.83 1181.2,-1804.47 1175.49,-1806.29 1175.49,-1806.29 1082.43,-1835.91 1082.43,-1835.91 1076.72,-1837.73 1065.28,-1837.73 1059.57,-1835.91"/>
<text xml:space="preserve" text-anchor="middle" x="1071" y="-1804.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">OUI matches known</text>
<text xml:space="preserve" text-anchor="middle" x="1071" y="-1793.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">BMC vendor prefix?</text>
</g>
<!-- h_norm&#45;&gt;h_oui -->
<g id="edge5" class="edge">
<title>h_norm&#45;&gt;h_oui</title>
<path fill="none" stroke="#555555" d="M1036.99,-1904.24C1042.27,-1888.63 1050.16,-1865.28 1057.01,-1845.01"/>
<polygon fill="#555555" stroke="#555555" points="1059.58,-1846.16 1059.49,-1837.68 1054.28,-1844.36 1059.58,-1846.16"/>
</g>
<!-- h_skip -->
<g id="node9" class="node">
<title>h_skip</title>
<path fill="#f8d7da" stroke="#721c24" d="M1230.46,-1689.55C1230.46,-1689.55 1153.54,-1689.55 1153.54,-1689.55 1147.54,-1689.55 1141.54,-1683.55 1141.54,-1677.55 1141.54,-1677.55 1141.54,-1664.65 1141.54,-1664.65 1141.54,-1658.65 1147.54,-1652.65 1153.54,-1652.65 1153.54,-1652.65 1230.46,-1652.65 1230.46,-1652.65 1236.46,-1652.65 1242.46,-1658.65 1242.46,-1664.65 1242.46,-1664.65 1242.46,-1677.55 1242.46,-1677.55 1242.46,-1683.55 1236.46,-1689.55 1230.46,-1689.55"/>
<text xml:space="preserve" text-anchor="middle" x="1192" y="-1672.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Not a BMC MAC</text>
<text xml:space="preserve" text-anchor="middle" x="1192" y="-1661.6" font-family="Helvetica,Arial,sans-serif" font-size="10.00">— silent exit</text>
</g>
<!-- h_oui&#45;&gt;h_skip -->
<g id="edge6" class="edge">
<title>h_oui&#45;&gt;h_skip</title>
<path fill="none" stroke="#555555" d="M1096.96,-1773.86C1118.39,-1750.91 1148.51,-1718.66 1169.07,-1696.66"/>
<polygon fill="#555555" stroke="#555555" points="1170.93,-1698.76 1174.35,-1691 1166.84,-1694.94 1170.93,-1698.76"/>
<text xml:space="preserve" text-anchor="middle" x="1153.88" y="-1733.2" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no match</text>
</g>
<!-- h_log -->
<g id="node10" class="node">
<title>h_log</title>
<path fill="#e8f4f8" stroke="#446688" d="M1089.34,-1689.55C1089.34,-1689.55 966.66,-1689.55 966.66,-1689.55 960.66,-1689.55 954.66,-1683.55 954.66,-1677.55 954.66,-1677.55 954.66,-1664.65 954.66,-1664.65 954.66,-1658.65 960.66,-1652.65 966.66,-1652.65 966.66,-1652.65 1089.34,-1652.65 1089.34,-1652.65 1095.34,-1652.65 1101.34,-1658.65 1101.34,-1664.65 1101.34,-1664.65 1101.34,-1677.55 1101.34,-1677.55 1101.34,-1683.55 1095.34,-1689.55 1089.34,-1689.55"/>
<text xml:space="preserve" text-anchor="middle" x="1028" y="-1672.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_info: BMC DHCP lease</text>
<text xml:space="preserve" text-anchor="middle" x="1028" y="-1661.6" font-family="Helvetica,Arial,sans-serif" font-size="10.00">IP / MAC / hostname</text>
</g>
<!-- h_oui&#45;&gt;h_log -->
<g id="edge7" class="edge">
<title>h_oui&#45;&gt;h_log</title>
<path fill="none" stroke="#555555" d="M1060.15,-1768.96C1052.98,-1747.35 1043.69,-1719.36 1036.94,-1699.03"/>
<polygon fill="#555555" stroke="#555555" points="1039.6,-1698.15 1034.42,-1691.44 1034.28,-1699.91 1039.6,-1698.15"/>
<text xml:space="preserve" text-anchor="middle" x="1063.16" y="-1733.2" font-family="Helvetica,Arial,sans-serif" font-size="9.00">match</text>
</g>
<!-- h_skip&#45;&gt;exit_ok -->
<g id="edge8" class="edge">
<title>h_skip&#45;&gt;exit_ok</title>
<path fill="none" stroke="#555555" d="M1198.87,-1652.31C1207.45,-1628.48 1221,-1584.68 1221,-1545.95 1221,-1545.95 1221,-1545.95 1221,-917.7 1221,-892.05 1221,-862.77 1221,-842.13"/>
<polygon fill="#555555" stroke="#555555" points="1223.8,-842.25 1221,-834.25 1218.2,-842.25 1223.8,-842.25"/>
</g>
<!-- f_upper -->
<g id="node20" class="node">
<title>f_upper</title>
<path fill="#e8f4f8" stroke="#446688" d="M965.71,-1562.95C965.71,-1562.95 812.29,-1562.95 812.29,-1562.95 806.29,-1562.95 800.29,-1556.95 800.29,-1550.95 800.29,-1550.95 800.29,-1538.95 800.29,-1538.95 800.29,-1532.95 806.29,-1526.95 812.29,-1526.95 812.29,-1526.95 965.71,-1526.95 965.71,-1526.95 971.71,-1526.95 977.71,-1532.95 977.71,-1538.95 977.71,-1538.95 977.71,-1550.95 977.71,-1550.95 977.71,-1556.95 971.71,-1562.95 965.71,-1562.95"/>
<text xml:space="preserve" text-anchor="middle" x="889" y="-1541.82" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Normalize MAC → UPPER:CASE</text>
</g>
<!-- h_log&#45;&gt;f_upper -->
<g id="edge9" class="edge">
<title>h_log&#45;&gt;f_upper</title>
<path fill="none" stroke="#555555" d="M1008.08,-1652.31C992.32,-1638.23 969.46,-1617.82 947.98,-1598.63"/>
<polygon fill="#555555" stroke="#555555" points="950.02,-1596.7 942.19,-1593.46 946.29,-1600.87 950.02,-1596.7"/>
<text xml:space="preserve" text-anchor="middle" x="965.62" y="-1601.65" font-family="Helvetica,Arial,sans-serif" font-size="9.00">call</text>
</g>
<!-- w_start -->
<g id="node11" class="node">
<title>w_start</title>
<ellipse fill="#c3e6cb" stroke="#155724" cx="520" cy="-2278.68" rx="86.21" ry="26.09"/>
<text xml:space="preserve" text-anchor="middle" x="520" y="-2280.43" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Worker process starts</text>
<text xml:space="preserve" text-anchor="middle" x="520" y="-2269.18" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log config + banner</text>
</g>
<!-- w_ping -->
<g id="node12" class="node">
<title>w_ping</title>
<path fill="#fff3cd" stroke="#856404" d="M508.39,-2186.62C508.39,-2186.62 432.94,-2167.01 432.94,-2167.01 427.14,-2165.5 427.14,-2162.48 432.94,-2160.97 432.94,-2160.97 508.39,-2141.36 508.39,-2141.36 514.19,-2139.85 525.81,-2139.85 531.61,-2141.36 531.61,-2141.36 607.06,-2160.97 607.06,-2160.97 612.86,-2162.48 612.86,-2165.5 607.06,-2167.01 607.06,-2167.01 531.61,-2186.62 531.61,-2186.62 525.81,-2188.13 514.19,-2188.13 508.39,-2186.62"/>
<text xml:space="preserve" text-anchor="middle" x="520" y="-2160.12" font-family="Helvetica,Arial,sans-serif" font-size="10.00">redis_cmd PING</text>
</g>
<!-- w_start&#45;&gt;w_ping -->
<g id="edge10" class="edge">
<title>w_start&#45;&gt;w_ping</title>
<path fill="none" stroke="#555555" d="M520,-2252.11C520,-2236.44 520,-2216.19 520,-2199.15"/>
<polygon fill="#555555" stroke="#555555" points="522.8,-2199.59 520,-2191.59 517.2,-2199.59 522.8,-2199.59"/>
</g>
<!-- w_perr -->
<g id="node13" class="node">
<title>w_perr</title>
<path fill="#f8d7da" stroke="#721c24" d="M684.96,-2061.25C684.96,-2061.25 533.04,-2061.25 533.04,-2061.25 527.04,-2061.25 521.04,-2055.25 521.04,-2049.25 521.04,-2049.25 521.04,-2037.25 521.04,-2037.25 521.04,-2031.25 527.04,-2025.25 533.04,-2025.25 533.04,-2025.25 684.96,-2025.25 684.96,-2025.25 690.96,-2025.25 696.96,-2031.25 696.96,-2037.25 696.96,-2037.25 696.96,-2049.25 696.96,-2049.25 696.96,-2055.25 690.96,-2061.25 684.96,-2061.25"/>
<text xml:space="preserve" text-anchor="middle" x="609" y="-2039.37" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_error: cannot connect to Redis</text>
</g>
<!-- w_ping&#45;&gt;w_perr -->
<g id="edge11" class="edge">
<title>w_ping&#45;&gt;w_perr</title>
<path fill="none" stroke="#555555" d="M535.71,-2142.04C551,-2121.64 574.23,-2090.64 590.43,-2069.03"/>
<polygon fill="#555555" stroke="#555555" points="592.58,-2070.82 595.14,-2062.74 588.1,-2067.46 592.58,-2070.82"/>
<text xml:space="preserve" text-anchor="middle" x="567.83" y="-2105.35" font-family="Helvetica,Arial,sans-serif" font-size="9.00">fail</text>
</g>
<!-- w_ping&#45;&gt;w_loop -->
<g id="edge12" class="edge">
<title>w_ping&#45;&gt;w_loop</title>
<path fill="none" stroke="#555555" d="M504.65,-2142.04C489.61,-2121.52 466.72,-2090.28 450.88,-2068.65"/>
<polygon fill="#555555" stroke="#555555" points="453.27,-2067.18 446.28,-2062.38 448.75,-2070.49 453.27,-2067.18"/>
<text xml:space="preserve" text-anchor="middle" x="486.58" y="-2105.35" font-family="Helvetica,Arial,sans-serif" font-size="9.00">ok</text>
</g>
<!-- w_perr&#45;&gt;exit_err -->
<g id="edge13" class="edge">
<title>w_perr&#45;&gt;exit_err</title>
<path fill="none" stroke="#555555" d="M697.29,-2029.95C735.81,-2021.34 779.86,-2006.8 814,-1982.35 825.91,-1973.82 835.57,-1960.7 842.51,-1949.06"/>
<polygon fill="#555555" stroke="#555555" points="844.86,-1950.59 846.34,-1942.25 839.98,-1947.85 844.86,-1950.59"/>
</g>
<!-- w_brpop -->
<g id="node15" class="node">
<title>w_brpop</title>
<path fill="#fff3cd" stroke="#856404" d="M489.17,-1946.59C489.17,-1946.59 361.66,-1924.96 361.66,-1924.96 355.75,-1923.95 355.75,-1921.95 361.66,-1920.94 361.66,-1920.94 489.17,-1899.31 489.17,-1899.31 495.08,-1898.3 506.92,-1898.3 512.83,-1899.31 512.83,-1899.31 640.34,-1920.94 640.34,-1920.94 646.25,-1921.95 646.25,-1923.95 640.34,-1924.96 640.34,-1924.96 512.83,-1946.59 512.83,-1946.59 506.92,-1947.6 495.08,-1947.6 489.17,-1946.59"/>
<text xml:space="preserve" text-anchor="middle" x="501" y="-1919.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">BRPOP &#160;queue &#160;timeout=1 s</text>
</g>
<!-- w_loop&#45;&gt;w_brpop -->
<g id="edge14" class="edge">
<title>w_loop&#45;&gt;w_brpop</title>
<path fill="none" stroke="#555555" d="M433.15,-2024.87C433.97,-2010.09 436.84,-1988.76 446,-1972.6 450.67,-1964.36 457.25,-1956.81 464.25,-1950.24"/>
<polygon fill="#555555" stroke="#555555" points="466.04,-1952.4 470.2,-1945.01 462.34,-1948.19 466.04,-1952.4"/>
</g>
<!-- w_brpop&#45;&gt;w_loop -->
<g id="edge16" class="edge">
<title>w_brpop&#45;&gt;w_loop</title>
<path fill="none" stroke="#555555" d="M487.83,-1946.86C476.27,-1966.97 459.48,-1996.19 447.53,-2016.98"/>
<polygon fill="#555555" stroke="#555555" points="445.2,-2015.4 443.64,-2023.74 450.06,-2018.2 445.2,-2015.4"/>
<text xml:space="preserve" text-anchor="middle" x="486.07" y="-1973.8" font-family="Helvetica,Arial,sans-serif" font-size="9.00">timeout</text>
</g>
<!-- w_rerr -->
<g id="node16" class="node">
<title>w_rerr</title>
<path fill="#f8d7da" stroke="#721c24" d="M405.46,-1821.1C405.46,-1821.1 298.54,-1821.1 298.54,-1821.1 292.54,-1821.1 286.54,-1815.1 286.54,-1809.1 286.54,-1809.1 286.54,-1796.2 286.54,-1796.2 286.54,-1790.2 292.54,-1784.2 298.54,-1784.2 298.54,-1784.2 405.46,-1784.2 405.46,-1784.2 411.46,-1784.2 417.46,-1790.2 417.46,-1796.2 417.46,-1796.2 417.46,-1809.1 417.46,-1809.1 417.46,-1815.1 411.46,-1821.1 405.46,-1821.1"/>
<text xml:space="preserve" text-anchor="middle" x="352" y="-1804.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_error: BRPOP failed</text>
<text xml:space="preserve" text-anchor="middle" x="352" y="-1793.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">sleep 5 s · retry</text>
</g>
<!-- w_brpop&#45;&gt;w_rerr -->
<g id="edge15" class="edge">
<title>w_brpop&#45;&gt;w_rerr</title>
<path fill="none" stroke="#555555" d="M475.05,-1901.34C448.98,-1880.65 408.87,-1848.81 381.59,-1827.14"/>
<polygon fill="#555555" stroke="#555555" points="383.45,-1825.04 375.44,-1822.26 379.97,-1829.43 383.45,-1825.04"/>
<text xml:space="preserve" text-anchor="middle" x="445.17" y="-1864.75" font-family="Helvetica,Arial,sans-serif" font-size="9.00">error</text>
</g>
<!-- w_parse -->
<g id="node17" class="node">
<title>w_parse</title>
<path fill="#e8f4f8" stroke="#446688" d="M642.84,-1821.1C642.84,-1821.1 469.17,-1821.1 469.17,-1821.1 463.17,-1821.1 457.17,-1815.1 457.17,-1809.1 457.17,-1809.1 457.17,-1796.2 457.17,-1796.2 457.17,-1790.2 463.17,-1784.2 469.17,-1784.2 469.17,-1784.2 642.84,-1784.2 642.84,-1784.2 648.84,-1784.2 654.84,-1790.2 654.84,-1796.2 654.84,-1796.2 654.84,-1809.1 654.84,-1809.1 654.84,-1815.1 648.84,-1821.1 642.84,-1821.1"/>
<text xml:space="preserve" text-anchor="middle" x="556" y="-1804.4" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Parse JSON event</text>
<text xml:space="preserve" text-anchor="middle" x="556" y="-1793.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">event_type · mac_address · ip_address</text>
</g>
<!-- w_brpop&#45;&gt;w_parse -->
<g id="edge17" class="edge">
<title>w_brpop&#45;&gt;w_parse</title>
<path fill="none" stroke="#555555" d="M511.74,-1898.86C520.94,-1879.06 534.2,-1850.55 543.8,-1829.89"/>
<polygon fill="#555555" stroke="#555555" points="546.33,-1831.1 547.16,-1822.66 541.25,-1828.74 546.33,-1831.1"/>
<text xml:space="preserve" text-anchor="middle" x="538.1" y="-1864.75" font-family="Helvetica,Arial,sans-serif" font-size="9.00">event</text>
</g>
<!-- w_rerr&#45;&gt;w_loop -->
<g id="edge18" class="edge">
<title>w_rerr&#45;&gt;w_loop</title>
<path fill="none" stroke="#555555" d="M343.26,-1821.43C330.71,-1849.63 311.05,-1905.77 330,-1948.6 344.05,-1980.37 374.8,-2005.99 399.06,-2022.35"/>
<polygon fill="#555555" stroke="#555555" points="397.51,-2024.68 405.74,-2026.71 400.57,-2019.99 397.51,-2024.68"/>
</g>
<!-- w_valid -->
<g id="node18" class="node">
<title>w_valid</title>
<path fill="#fff3cd" stroke="#856404" d="M529.59,-1704.29C529.59,-1704.29 438.74,-1674.8 438.74,-1674.8 433.04,-1672.95 433.04,-1669.25 438.74,-1667.39 438.74,-1667.39 529.59,-1637.9 529.59,-1637.9 535.29,-1636.05 546.71,-1636.05 552.41,-1637.9 552.41,-1637.9 643.26,-1667.39 643.26,-1667.39 648.96,-1669.25 648.96,-1672.95 643.26,-1674.8 643.26,-1674.8 552.41,-1704.29 552.41,-1704.29 546.71,-1706.15 535.29,-1706.15 529.59,-1704.29"/>
<text xml:space="preserve" text-anchor="middle" x="541" y="-1672.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">mac_address and</text>
<text xml:space="preserve" text-anchor="middle" x="541" y="-1661.6" font-family="Helvetica,Arial,sans-serif" font-size="10.00">ip_address present?</text>
</g>
<!-- w_parse&#45;&gt;w_valid -->
<g id="edge19" class="edge">
<title>w_parse&#45;&gt;w_valid</title>
<path fill="none" stroke="#555555" d="M553.95,-1783.91C551.94,-1766.61 548.82,-1739.6 546.14,-1716.47"/>
<polygon fill="#555555" stroke="#555555" points="548.94,-1716.29 545.23,-1708.66 543.37,-1716.93 548.94,-1716.29"/>
</g>
<!-- w_verr -->
<g id="node19" class="node">
<title>w_verr</title>
<path fill="#f8d7da" stroke="#721c24" d="M639.71,-1562.95C639.71,-1562.95 534.29,-1562.95 534.29,-1562.95 528.29,-1562.95 522.29,-1556.95 522.29,-1550.95 522.29,-1550.95 522.29,-1538.95 522.29,-1538.95 522.29,-1532.95 528.29,-1526.95 534.29,-1526.95 534.29,-1526.95 639.71,-1526.95 639.71,-1526.95 645.71,-1526.95 651.71,-1532.95 651.71,-1538.95 651.71,-1538.95 651.71,-1550.95 651.71,-1550.95 651.71,-1556.95 645.71,-1562.95 639.71,-1562.95"/>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1541.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_error: missing fields</text>
</g>
<!-- w_valid&#45;&gt;w_verr -->
<g id="edge20" class="edge">
<title>w_valid&#45;&gt;w_verr</title>
<path fill="none" stroke="#555555" d="M552.97,-1637.8C560.56,-1617.31 570.26,-1591.13 577.36,-1571.97"/>
<polygon fill="#555555" stroke="#555555" points="579.94,-1573.08 580.09,-1564.6 574.68,-1571.13 579.94,-1573.08"/>
<text xml:space="preserve" text-anchor="middle" x="572" y="-1601.65" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- w_valid&#45;&gt;f_upper -->
<g id="edge21" class="edge">
<title>w_valid&#45;&gt;f_upper</title>
<path fill="none" stroke="#555555" d="M594.23,-1651.11C635.7,-1636.32 695.22,-1615.08 749.93,-1595.56"/>
<polygon fill="#555555" stroke="#555555" points="750.65,-1598.28 757.24,-1592.96 748.76,-1593.01 750.65,-1598.28"/>
<text xml:space="preserve" text-anchor="middle" x="742.96" y="-1601.65" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- w_verr&#45;&gt;w_loop -->
<g id="edge22" class="edge">
<title>w_verr&#45;&gt;w_loop</title>
<path fill="none" stroke="#555555" d="M617.65,-1563.35C649.89,-1584.19 696,-1622.34 696,-1670.1 696,-1923.95 696,-1923.95 696,-1923.95 696,-2018.04 587.45,-1969.22 501,-2006.35 489.68,-2011.21 477.68,-2017.24 466.96,-2022.95"/>
<polygon fill="#555555" stroke="#555555" points="465.71,-2020.45 460.01,-2026.72 468.38,-2025.37 465.71,-2020.45"/>
</g>
<!-- f_iface -->
<g id="node21" class="node">
<title>f_iface</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M963.84,-1477.95C963.84,-1477.95 814.16,-1477.95 814.16,-1477.95 808.16,-1477.95 802.16,-1471.95 802.16,-1465.95 802.16,-1465.95 802.16,-1441.8 802.16,-1441.8 802.16,-1435.8 808.16,-1429.8 814.16,-1429.8 814.16,-1429.8 963.84,-1429.8 963.84,-1429.8 969.84,-1429.8 975.84,-1435.8 975.84,-1441.8 975.84,-1441.8 975.84,-1465.95 975.84,-1465.95 975.84,-1471.95 969.84,-1477.95 963.84,-1477.95"/>
<text xml:space="preserve" text-anchor="middle" x="889" y="-1461.25" font-family="Helvetica,Arial,sans-serif" font-size="10.00">GET /api/dcim/interfaces/</text>
<text xml:space="preserve" text-anchor="middle" x="889" y="-1450" font-family="Helvetica,Arial,sans-serif" font-size="10.00">?mac_address=MAC&amp;name=bmc</text>
<text xml:space="preserve" text-anchor="middle" x="889" y="-1438.75" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- f_upper&#45;&gt;f_iface -->
<g id="edge23" class="edge">
<title>f_upper&#45;&gt;f_iface</title>
<path fill="none" stroke="#555555" d="M889,-1526.78C889,-1515.71 889,-1500.97 889,-1487.71"/>
<polygon fill="#555555" stroke="#555555" points="891.8,-1487.91 889,-1479.91 886.2,-1487.91 891.8,-1487.91"/>
</g>
<!-- f_count -->
<g id="node22" class="node">
<title>f_count</title>
<path fill="#fff3cd" stroke="#856404" d="M877.31,-1378.09C877.31,-1378.09 790.02,-1357.86 790.02,-1357.86 784.18,-1356.5 784.18,-1353.79 790.02,-1352.44 790.02,-1352.44 877.31,-1332.21 877.31,-1332.21 883.15,-1330.85 894.85,-1330.85 900.69,-1332.21 900.69,-1332.21 987.98,-1352.44 987.98,-1352.44 993.82,-1353.79 993.82,-1356.5 987.98,-1357.86 987.98,-1357.86 900.69,-1378.09 900.69,-1378.09 894.85,-1379.44 883.15,-1379.44 877.31,-1378.09"/>
<text xml:space="preserve" text-anchor="middle" x="889" y="-1351.27" font-family="Helvetica,Arial,sans-serif" font-size="10.00">results.count == 0?</text>
</g>
<!-- f_iface&#45;&gt;f_count -->
<g id="edge24" class="edge">
<title>f_iface&#45;&gt;f_count</title>
<path fill="none" stroke="#555555" d="M889,-1429.46C889,-1417.79 889,-1403.44 889,-1390.55"/>
<polygon fill="#555555" stroke="#555555" points="891.8,-1390.55 889,-1382.55 886.2,-1390.55 891.8,-1390.55"/>
</g>
<!-- f_none -->
<g id="node23" class="node">
<title>f_none</title>
<path fill="#f8d7da" stroke="#721c24" d="M880.71,-1271.3C880.71,-1271.3 733.29,-1271.3 733.29,-1271.3 727.29,-1271.3 721.29,-1265.3 721.29,-1259.3 721.29,-1259.3 721.29,-1247.3 721.29,-1247.3 721.29,-1241.3 727.29,-1235.3 733.29,-1235.3 733.29,-1235.3 880.71,-1235.3 880.71,-1235.3 886.71,-1235.3 892.71,-1241.3 892.71,-1247.3 892.71,-1247.3 892.71,-1259.3 892.71,-1259.3 892.71,-1265.3 886.71,-1271.3 880.71,-1271.3"/>
<text xml:space="preserve" text-anchor="middle" x="807" y="-1249.42" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_warn: no device for this MAC</text>
</g>
<!-- f_count&#45;&gt;f_none -->
<g id="edge25" class="edge">
<title>f_count&#45;&gt;f_none</title>
<path fill="none" stroke="#555555" d="M872.01,-1333.46C858.99,-1317.61 840.99,-1295.69 827.23,-1278.93"/>
<polygon fill="#555555" stroke="#555555" points="829.44,-1277.21 822.2,-1272.8 825.11,-1280.76 829.44,-1277.21"/>
<text xml:space="preserve" text-anchor="middle" x="878.38" y="-1296.95" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes (not found)</text>
</g>
<!-- f_dev -->
<g id="node24" class="node">
<title>f_dev</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M1065.59,-1271.75C1065.59,-1271.75 944.41,-1271.75 944.41,-1271.75 938.41,-1271.75 932.41,-1265.75 932.41,-1259.75 932.41,-1259.75 932.41,-1246.85 932.41,-1246.85 932.41,-1240.85 938.41,-1234.85 944.41,-1234.85 944.41,-1234.85 1065.59,-1234.85 1065.59,-1234.85 1071.59,-1234.85 1077.59,-1240.85 1077.59,-1246.85 1077.59,-1246.85 1077.59,-1259.75 1077.59,-1259.75 1077.59,-1265.75 1071.59,-1271.75 1065.59,-1271.75"/>
<text xml:space="preserve" text-anchor="middle" x="1005" y="-1255.05" font-family="Helvetica,Arial,sans-serif" font-size="10.00">GET /api/dcim/devices/{id}/</text>
<text xml:space="preserve" text-anchor="middle" x="1005" y="-1243.8" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- f_count&#45;&gt;f_dev -->
<g id="edge26" class="edge">
<title>f_count&#45;&gt;f_dev</title>
<path fill="none" stroke="#555555" d="M911.92,-1334.42C930.74,-1318.22 957.45,-1295.23 977.43,-1278.03"/>
<polygon fill="#555555" stroke="#555555" points="979.08,-1280.31 983.31,-1272.97 975.42,-1276.06 979.08,-1280.31"/>
<text xml:space="preserve" text-anchor="middle" x="959.2" y="-1296.95" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- p_found -->
<g id="node26" class="node">
<title>p_found</title>
<path fill="#fff3cd" stroke="#856404" d="M865.02,-1075.11C865.02,-1075.11 803.31,-1047.89 803.31,-1047.89 797.82,-1045.47 797.82,-1040.63 803.31,-1038.21 803.31,-1038.21 865.02,-1010.99 865.02,-1010.99 870.51,-1008.57 881.49,-1008.57 886.98,-1010.99 886.98,-1010.99 948.69,-1038.21 948.69,-1038.21 954.18,-1040.63 954.18,-1045.47 948.69,-1047.89 948.69,-1047.89 886.98,-1075.11 886.98,-1075.11 881.49,-1077.53 870.51,-1077.53 865.02,-1075.11"/>
<text xml:space="preserve" text-anchor="middle" x="876" y="-1044.8" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Device found</text>
<text xml:space="preserve" text-anchor="middle" x="876" y="-1033.55" font-family="Helvetica,Arial,sans-serif" font-size="10.00">in NetBox?</text>
</g>
<!-- f_none&#45;&gt;p_found -->
<g id="edge29" class="edge">
<title>f_none&#45;&gt;p_found</title>
<path fill="none" stroke="#555555" d="M847.62,-1129.7C852.98,-1113.51 858.14,-1097.94 862.56,-1084.61"/>
<polygon fill="#555555" stroke="#555555" points="865.22,-1085.5 865.07,-1077.03 859.9,-1083.74 865.22,-1085.5"/>
<text xml:space="preserve" text-anchor="middle" x="867.85" y="-1158.1" font-family="Helvetica,Arial,sans-serif" font-size="9.00">return null</text>
</g>
<!-- f_ret -->
<g id="node25" class="node">
<title>f_ret</title>
<path fill="#e8f4f8" stroke="#446688" d="M1045.09,-1185.85C1045.09,-1185.85 926.91,-1185.85 926.91,-1185.85 920.91,-1185.85 914.91,-1179.85 914.91,-1173.85 914.91,-1173.85 914.91,-1149.7 914.91,-1149.7 914.91,-1143.7 920.91,-1137.7 926.91,-1137.7 926.91,-1137.7 1045.09,-1137.7 1045.09,-1137.7 1051.09,-1137.7 1057.09,-1143.7 1057.09,-1149.7 1057.09,-1149.7 1057.09,-1173.85 1057.09,-1173.85 1057.09,-1179.85 1051.09,-1185.85 1045.09,-1185.85"/>
<text xml:space="preserve" text-anchor="middle" x="986" y="-1169.15" font-family="Helvetica,Arial,sans-serif" font-size="10.00">Return</text>
<text xml:space="preserve" text-anchor="middle" x="986" y="-1157.9" font-family="Helvetica,Arial,sans-serif" font-size="10.00">device_id · device_name</text>
<text xml:space="preserve" text-anchor="middle" x="986" y="-1146.65" font-family="Helvetica,Arial,sans-serif" font-size="10.00">interface_id · current_state</text>
</g>
<!-- f_dev&#45;&gt;f_ret -->
<g id="edge27" class="edge">
<title>f_dev&#45;&gt;f_ret</title>
<path fill="none" stroke="#555555" d="M1001.25,-1234.61C998.88,-1223.46 995.75,-1208.71 992.94,-1195.48"/>
<polygon fill="#555555" stroke="#555555" points="995.68,-1194.92 991.28,-1187.67 990.21,-1196.08 995.68,-1194.92"/>
</g>
<!-- f_ret&#45;&gt;p_found -->
<g id="edge28" class="edge">
<title>f_ret&#45;&gt;p_found</title>
<path fill="none" stroke="#555555" d="M947.5,-1129.7C941.71,-1124.54 935.95,-1119.11 930.75,-1113.7 920.43,-1102.97 910.09,-1090.39 901.22,-1078.9"/>
<polygon fill="#555555" stroke="#555555" points="903.6,-1077.42 896.53,-1072.75 899.15,-1080.81 903.6,-1077.42"/>
<text xml:space="preserve" text-anchor="middle" x="955.88" y="-1105.15" font-family="Helvetica,Arial,sans-serif" font-size="9.00">return JSON</text>
</g>
<!-- p_nofound -->
<g id="node27" class="node">
<title>p_nofound</title>
<path fill="#f8d7da" stroke="#721c24" d="M1065.71,-937.15C1065.71,-937.15 948.29,-937.15 948.29,-937.15 942.29,-937.15 936.29,-931.15 936.29,-925.15 936.29,-925.15 936.29,-912.25 936.29,-912.25 936.29,-906.25 942.29,-900.25 948.29,-900.25 948.29,-900.25 1065.71,-900.25 1065.71,-900.25 1071.71,-900.25 1077.71,-906.25 1077.71,-912.25 1077.71,-912.25 1077.71,-925.15 1077.71,-925.15 1077.71,-931.15 1071.71,-937.15 1065.71,-937.15"/>
<text xml:space="preserve" text-anchor="middle" x="1007" y="-920.45" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_error: device not found</text>
<text xml:space="preserve" text-anchor="middle" x="1007" y="-909.2" font-family="Helvetica,Arial,sans-serif" font-size="10.00">no action taken</text>
</g>
<!-- p_found&#45;&gt;p_nofound -->
<g id="edge30" class="edge">
<title>p_found&#45;&gt;p_nofound</title>
<path fill="none" stroke="#555555" d="M902.19,-1017.58C925.2,-996.1 958.47,-965.02 981.32,-943.68"/>
<polygon fill="#555555" stroke="#555555" points="983.02,-945.93 986.95,-938.42 979.19,-941.84 983.02,-945.93"/>
<text xml:space="preserve" text-anchor="middle" x="954.59" y="-973.6" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- p_journal -->
<g id="node28" class="node">
<title>p_journal</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M884.59,-948.4C884.59,-948.4 697.41,-948.4 697.41,-948.4 691.41,-948.4 685.41,-942.4 685.41,-936.4 685.41,-936.4 685.41,-901 685.41,-901 685.41,-895 691.41,-889 697.41,-889 697.41,-889 884.59,-889 884.59,-889 890.59,-889 896.59,-895 896.59,-901 896.59,-901 896.59,-936.4 896.59,-936.4 896.59,-942.4 890.59,-948.4 884.59,-948.4"/>
<text xml:space="preserve" text-anchor="middle" x="791" y="-931.7" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="791" y="-920.45" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=success</text>
<text xml:space="preserve" text-anchor="middle" x="791" y="-909.2" font-family="Helvetica,Arial,sans-serif" font-size="10.00">&quot;BMC discovered via DHCP — MAC / IP&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="791" y="-897.95" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- p_found&#45;&gt;p_journal -->
<g id="edge31" class="edge">
<title>p_found&#45;&gt;p_journal</title>
<path fill="none" stroke="#555555" d="M856.71,-1014.29C844.8,-997.14 829.37,-974.93 816.46,-956.35"/>
<polygon fill="#555555" stroke="#555555" points="818.83,-954.84 811.96,-949.87 814.23,-958.04 818.83,-954.84"/>
<text xml:space="preserve" text-anchor="middle" x="840.62" y="-973.6" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- p_nofound&#45;&gt;exit_ok -->
<g id="edge32" class="edge">
<title>p_nofound&#45;&gt;exit_ok</title>
<path fill="none" stroke="#555555" d="M1044.28,-899.87C1084.47,-880.65 1147.9,-850.31 1186.84,-831.69"/>
<polygon fill="#555555" stroke="#555555" points="1187.86,-834.3 1193.87,-828.33 1185.44,-829.25 1187.86,-834.3"/>
</g>
<!-- p_state -->
<g id="node29" class="node">
<title>p_state</title>
<path fill="#fff3cd" stroke="#856404" d="M779.48,-836.65C779.48,-836.65 714.35,-817.7 714.35,-817.7 708.59,-816.03 708.59,-812.67 714.35,-811 714.35,-811 779.48,-792.05 779.48,-792.05 785.24,-790.38 796.76,-790.38 802.52,-792.05 802.52,-792.05 867.65,-811 867.65,-811 873.41,-812.67 873.41,-816.03 867.65,-817.7 867.65,-817.7 802.52,-836.65 802.52,-836.65 796.76,-838.32 785.24,-838.32 779.48,-836.65"/>
<text xml:space="preserve" text-anchor="middle" x="791" y="-810.47" font-family="Helvetica,Arial,sans-serif" font-size="10.00">current_state?</text>
</g>
<!-- p_journal&#45;&gt;p_state -->
<g id="edge33" class="edge">
<title>p_journal&#45;&gt;p_state</title>
<path fill="none" stroke="#555555" d="M791,-888.64C791,-876.49 791,-862.28 791,-849.63"/>
<polygon fill="#555555" stroke="#555555" points="793.8,-849.82 791,-841.82 788.2,-849.82 793.8,-849.82"/>
</g>
<!-- a_getip -->
<g id="node30" class="node">
<title>a_getip</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M423.58,-494.52C423.58,-494.52 254.42,-494.52 254.42,-494.52 248.42,-494.52 242.42,-488.52 242.42,-482.52 242.42,-482.52 242.42,-447.12 242.42,-447.12 242.42,-441.12 248.42,-435.12 254.42,-435.12 254.42,-435.12 423.58,-435.12 423.58,-435.12 429.58,-435.12 435.58,-441.12 435.58,-447.12 435.58,-447.12 435.58,-482.52 435.58,-482.52 435.58,-488.52 429.58,-494.52 423.58,-494.52"/>
<text xml:space="preserve" text-anchor="middle" x="339" y="-477.82" font-family="Helvetica,Arial,sans-serif" font-size="10.00">GET /api/ipam/ip&#45;addresses/</text>
<text xml:space="preserve" text-anchor="middle" x="339" y="-466.57" font-family="Helvetica,Arial,sans-serif" font-size="10.00">?assigned_object_type=dcim.interface</text>
<text xml:space="preserve" text-anchor="middle" x="339" y="-455.32" font-family="Helvetica,Arial,sans-serif" font-size="10.00">&amp;assigned_object_id=IFACE_ID</text>
<text xml:space="preserve" text-anchor="middle" x="339" y="-444.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- p_state&#45;&gt;a_getip -->
<g id="edge34" class="edge">
<title>p_state&#45;&gt;a_getip</title>
<path fill="none" stroke="#555555" d="M754.03,-799.06C688.93,-772.61 551.86,-711.11 458,-628.3 426.44,-600.45 398.24,-562.86 377.23,-530.85"/>
<polygon fill="#555555" stroke="#555555" points="379.84,-529.73 373.14,-524.54 375.14,-532.78 379.84,-529.73"/>
<text xml:space="preserve" text-anchor="middle" x="489.6" y="-637.5" font-family="Helvetica,Arial,sans-serif" font-size="9.00">active</text>
</g>
<!-- o_patch -->
<g id="node35" class="node">
<title>o_patch</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M1179.96,-718.2C1179.96,-718.2 1046.04,-718.2 1046.04,-718.2 1040.04,-718.2 1034.04,-712.2 1034.04,-706.2 1034.04,-706.2 1034.04,-682.05 1034.04,-682.05 1034.04,-676.05 1040.04,-670.05 1046.04,-670.05 1046.04,-670.05 1179.96,-670.05 1179.96,-670.05 1185.96,-670.05 1191.96,-676.05 1191.96,-682.05 1191.96,-682.05 1191.96,-706.2 1191.96,-706.2 1191.96,-712.2 1185.96,-718.2 1179.96,-718.2"/>
<text xml:space="preserve" text-anchor="middle" x="1113" y="-701.5" font-family="Helvetica,Arial,sans-serif" font-size="10.00">PATCH /api/dcim/devices/{id}/</text>
<text xml:space="preserve" text-anchor="middle" x="1113" y="-690.25" font-family="Helvetica,Arial,sans-serif" font-size="10.00">status = &quot;discovered&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="1113" y="-679" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- p_state&#45;&gt;o_patch -->
<g id="edge35" class="edge">
<title>p_state&#45;&gt;o_patch</title>
<path fill="none" stroke="#555555" d="M829.2,-799.32C873.35,-783.11 947.82,-755.77 1009.4,-733.16"/>
<polygon fill="#555555" stroke="#555555" points="1010.04,-735.91 1016.58,-730.53 1008.11,-730.65 1010.04,-735.91"/>
<text xml:space="preserve" text-anchor="middle" x="954.72" y="-756.15" font-family="Helvetica,Arial,sans-serif" font-size="9.00">offline</text>
</g>
<!-- d_log -->
<g id="node41" class="node">
<title>d_log</title>
<path fill="#e8f4f8" stroke="#446688" d="M743.71,-599.55C743.71,-599.55 620.29,-599.55 620.29,-599.55 614.29,-599.55 608.29,-593.55 608.29,-587.55 608.29,-587.55 608.29,-574.65 608.29,-574.65 608.29,-568.65 614.29,-562.65 620.29,-562.65 620.29,-562.65 743.71,-562.65 743.71,-562.65 749.71,-562.65 755.71,-568.65 755.71,-574.65 755.71,-574.65 755.71,-587.55 755.71,-587.55 755.71,-593.55 749.71,-599.55 743.71,-599.55"/>
<text xml:space="preserve" text-anchor="middle" x="682" y="-582.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_info: already discovered</text>
<text xml:space="preserve" text-anchor="middle" x="682" y="-571.6" font-family="Helvetica,Arial,sans-serif" font-size="10.00">refreshing IP</text>
</g>
<!-- p_state&#45;&gt;d_log -->
<g id="edge36" class="edge">
<title>p_state&#45;&gt;d_log</title>
<path fill="none" stroke="#555555" d="M780.75,-791.59C764.18,-756.44 731.02,-686.1 707.71,-636.66"/>
<polygon fill="#555555" stroke="#555555" points="710.36,-635.71 704.42,-629.66 705.3,-638.09 710.36,-635.71"/>
<text xml:space="preserve" text-anchor="middle" x="781.96" y="-690.45" font-family="Helvetica,Arial,sans-serif" font-size="9.00">discovered</text>
</g>
<!-- x_jrnl -->
<g id="node46" class="node">
<title>x_jrnl</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M941.21,-144.67C941.21,-144.67 796.79,-144.67 796.79,-144.67 790.79,-144.67 784.79,-138.67 784.79,-132.67 784.79,-132.67 784.79,-97.27 784.79,-97.27 784.79,-91.27 790.79,-85.27 796.79,-85.27 796.79,-85.27 941.21,-85.27 941.21,-85.27 947.21,-85.27 953.21,-91.27 953.21,-97.27 953.21,-97.27 953.21,-132.67 953.21,-132.67 953.21,-138.67 947.21,-144.67 941.21,-144.67"/>
<text xml:space="preserve" text-anchor="middle" x="869" y="-127.97" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="869" y="-116.72" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=warning</text>
<text xml:space="preserve" text-anchor="middle" x="869" y="-105.47" font-family="Helvetica,Arial,sans-serif" font-size="10.00">&quot;unexpected state: STATE&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="869" y="-94.22" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- p_state&#45;&gt;x_jrnl -->
<g id="edge37" class="edge">
<title>p_state&#45;&gt;x_jrnl</title>
<path fill="none" stroke="#555555" d="M809.51,-793.75C828.41,-771.62 855,-733.64 855,-695.12 855,-695.12 855,-695.12 855,-229.5 855,-214.33 856.25,-198.11 858,-182.81"/>
<polygon fill="#555555" stroke="#555555" points="860.77,-183.21 858.96,-174.93 855.21,-182.53 860.77,-183.21"/>
<text xml:space="preserve" text-anchor="middle" x="865.5" y="-461.15" font-family="Helvetica,Arial,sans-serif" font-size="9.00">other</text>
</g>
<!-- a_exist -->
<g id="node31" class="node">
<title>a_exist</title>
<path fill="#fff3cd" stroke="#856404" d="M327.86,-381.65C327.86,-381.65 258.22,-353.7 258.22,-353.7 252.65,-351.46 252.65,-346.99 258.22,-344.75 258.22,-344.75 327.86,-316.8 327.86,-316.8 333.43,-314.56 344.57,-314.56 350.14,-316.8 350.14,-316.8 419.78,-344.75 419.78,-344.75 425.35,-346.99 425.35,-351.46 419.78,-353.7 419.78,-353.7 350.14,-381.65 350.14,-381.65 344.57,-383.89 333.43,-383.89 327.86,-381.65"/>
<text xml:space="preserve" text-anchor="middle" x="339" y="-350.97" font-family="Helvetica,Arial,sans-serif" font-size="10.00">IP record</text>
<text xml:space="preserve" text-anchor="middle" x="339" y="-339.72" font-family="Helvetica,Arial,sans-serif" font-size="10.00">already exists?</text>
</g>
<!-- a_getip&#45;&gt;a_exist -->
<g id="edge38" class="edge">
<title>a_getip&#45;&gt;a_exist</title>
<path fill="none" stroke="#555555" d="M339,-434.86C339,-423.02 339,-409.02 339,-395.86"/>
<polygon fill="#555555" stroke="#555555" points="341.8,-395.97 339,-387.97 336.2,-395.97 341.8,-395.97"/>
</g>
<!-- a_patch -->
<g id="node32" class="node">
<title>a_patch</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M213.83,-254.57C213.83,-254.57 28.17,-254.57 28.17,-254.57 22.17,-254.57 16.17,-248.57 16.17,-242.57 16.17,-242.57 16.17,-218.42 16.17,-218.42 16.17,-212.42 22.17,-206.42 28.17,-206.42 28.17,-206.42 213.83,-206.42 213.83,-206.42 219.83,-206.42 225.83,-212.42 225.83,-218.42 225.83,-218.42 225.83,-242.57 225.83,-242.57 225.83,-248.57 219.83,-254.57 213.83,-254.57"/>
<text xml:space="preserve" text-anchor="middle" x="121" y="-237.87" font-family="Helvetica,Arial,sans-serif" font-size="10.00">PATCH /api/ipam/ip&#45;addresses/{id}/</text>
<text xml:space="preserve" text-anchor="middle" x="121" y="-226.62" font-family="Helvetica,Arial,sans-serif" font-size="10.00">address=IP/PREFIX · updated description</text>
<text xml:space="preserve" text-anchor="middle" x="121" y="-215.37" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- a_exist&#45;&gt;a_patch -->
<g id="edge39" class="edge">
<title>a_exist&#45;&gt;a_patch</title>
<path fill="none" stroke="#555555" d="M300.28,-327.49C264.87,-308.53 212.21,-280.33 173.11,-259.4"/>
<polygon fill="#555555" stroke="#555555" points="174.69,-257.07 166.32,-255.77 172.05,-262.01 174.69,-257.07"/>
<text xml:space="preserve" text-anchor="middle" x="230.59" y="-279.77" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- a_post -->
<g id="node33" class="node">
<title>a_post</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M423.96,-254.57C423.96,-254.57 278.04,-254.57 278.04,-254.57 272.04,-254.57 266.04,-248.57 266.04,-242.57 266.04,-242.57 266.04,-218.42 266.04,-218.42 266.04,-212.42 272.04,-206.42 278.04,-206.42 278.04,-206.42 423.96,-206.42 423.96,-206.42 429.96,-206.42 435.96,-212.42 435.96,-218.42 435.96,-218.42 435.96,-242.57 435.96,-242.57 435.96,-248.57 429.96,-254.57 423.96,-254.57"/>
<text xml:space="preserve" text-anchor="middle" x="351" y="-237.87" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/ipam/ip&#45;addresses/</text>
<text xml:space="preserve" text-anchor="middle" x="351" y="-226.62" font-family="Helvetica,Arial,sans-serif" font-size="10.00">(no record yet — fallback assign)</text>
<text xml:space="preserve" text-anchor="middle" x="351" y="-215.37" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- a_exist&#45;&gt;a_post -->
<g id="edge40" class="edge">
<title>a_exist&#45;&gt;a_post</title>
<path fill="none" stroke="#555555" d="M342.57,-313.52C344.18,-297.83 346.08,-279.38 347.66,-263.97"/>
<polygon fill="#555555" stroke="#555555" points="350.42,-264.56 348.45,-256.32 344.85,-263.99 350.42,-264.56"/>
<text xml:space="preserve" text-anchor="middle" x="351.32" y="-279.77" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- a_jrnl -->
<g id="node34" class="node">
<title>a_jrnl</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M424.21,-139.05C424.21,-139.05 243.79,-139.05 243.79,-139.05 237.79,-139.05 231.79,-133.05 231.79,-127.05 231.79,-127.05 231.79,-102.9 231.79,-102.9 231.79,-96.9 237.79,-90.9 243.79,-90.9 243.79,-90.9 424.21,-90.9 424.21,-90.9 430.21,-90.9 436.21,-96.9 436.21,-102.9 436.21,-102.9 436.21,-127.05 436.21,-127.05 436.21,-133.05 430.21,-139.05 424.21,-139.05"/>
<text xml:space="preserve" text-anchor="middle" x="334" y="-122.35" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="334" y="-111.1" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=info &#160;&quot;IP assigned to interface bmc&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="334" y="-99.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- a_patch&#45;&gt;a_jrnl -->
<g id="edge41" class="edge">
<title>a_patch&#45;&gt;a_jrnl</title>
<path fill="none" stroke="#555555" d="M165.13,-205.98C198.98,-187.94 245.79,-162.99 281.55,-143.93"/>
<polygon fill="#555555" stroke="#555555" points="282.84,-146.41 288.59,-140.18 280.21,-141.47 282.84,-146.41"/>
</g>
<!-- a_post&#45;&gt;a_jrnl -->
<g id="edge42" class="edge">
<title>a_post&#45;&gt;a_jrnl</title>
<path fill="none" stroke="#555555" d="M347.48,-205.98C345,-189.46 341.66,-167.15 338.93,-148.87"/>
<polygon fill="#555555" stroke="#555555" points="341.7,-148.46 337.74,-140.96 336.16,-149.29 341.7,-148.46"/>
</g>
<!-- a_jrnl&#45;&gt;done -->
<g id="edge43" class="edge">
<title>a_jrnl&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M436.19,-82.9C443.55,-80.92 450.87,-79.02 458,-77.27 548.45,-55.12 655.98,-35.86 713.94,-26.04"/>
<polygon fill="#555555" stroke="#555555" points="714.23,-28.83 721.65,-24.75 713.3,-23.31 714.23,-28.83"/>
</g>
<!-- o_jrnl1 -->
<g id="node36" class="node">
<title>o_jrnl1</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M1204.71,-605.92C1204.71,-605.92 1039.29,-605.92 1039.29,-605.92 1033.29,-605.92 1027.29,-599.92 1027.29,-593.92 1027.29,-593.92 1027.29,-568.27 1027.29,-568.27 1027.29,-562.27 1033.29,-556.27 1039.29,-556.27 1039.29,-556.27 1204.71,-556.27 1204.71,-556.27 1210.71,-556.27 1216.71,-562.27 1216.71,-568.27 1216.71,-568.27 1216.71,-593.92 1216.71,-593.92 1216.71,-599.92 1210.71,-605.92 1204.71,-605.92"/>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-589.22" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-577.97" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=success &#160;&quot;offline → discovered&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-565.22" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- o_patch&#45;&gt;o_jrnl1 -->
<g id="edge44" class="edge">
<title>o_patch&#45;&gt;o_jrnl1</title>
<path fill="none" stroke="#555555" d="M1114.91,-669.58C1116.18,-653.9 1117.87,-633.05 1119.28,-615.64"/>
<polygon fill="#555555" stroke="#555555" points="1122.05,-616.09 1119.91,-607.89 1116.47,-615.63 1122.05,-616.09"/>
</g>
<!-- o_post -->
<g id="node37" class="node">
<title>o_post</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M1202.09,-494.52C1202.09,-494.52 1041.91,-494.52 1041.91,-494.52 1035.91,-494.52 1029.91,-488.52 1029.91,-482.52 1029.91,-482.52 1029.91,-447.12 1029.91,-447.12 1029.91,-441.12 1035.91,-435.12 1041.91,-435.12 1041.91,-435.12 1202.09,-435.12 1202.09,-435.12 1208.09,-435.12 1214.09,-441.12 1214.09,-447.12 1214.09,-447.12 1214.09,-482.52 1214.09,-482.52 1214.09,-488.52 1208.09,-494.52 1202.09,-494.52"/>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-477.82" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/ipam/ip&#45;addresses/</text>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-466.57" font-family="Helvetica,Arial,sans-serif" font-size="10.00">address=IP/PREFIX · status=active</text>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-455.32" font-family="Helvetica,Arial,sans-serif" font-size="10.00">assigned to bmc interface</text>
<text xml:space="preserve" text-anchor="middle" x="1122" y="-444.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- o_jrnl1&#45;&gt;o_post -->
<g id="edge45" class="edge">
<title>o_jrnl1&#45;&gt;o_post</title>
<path fill="none" stroke="#555555" d="M1122,-555.86C1122,-540.83 1122,-521.18 1122,-504.08"/>
<polygon fill="#555555" stroke="#555555" points="1124.8,-504.4 1122,-496.4 1119.2,-504.4 1124.8,-504.4"/>
</g>
<!-- o_400 -->
<g id="node38" class="node">
<title>o_400</title>
<path fill="#fff3cd" stroke="#856404" d="M1112.02,-381.28C1112.02,-381.28 1050.31,-354.07 1050.31,-354.07 1044.82,-351.65 1044.82,-346.8 1050.31,-344.38 1050.31,-344.38 1112.02,-317.17 1112.02,-317.17 1117.51,-314.75 1128.49,-314.75 1133.98,-317.17 1133.98,-317.17 1195.69,-344.38 1195.69,-344.38 1201.18,-346.8 1201.18,-351.65 1195.69,-354.07 1195.69,-354.07 1133.98,-381.28 1133.98,-381.28 1128.49,-383.7 1117.51,-383.7 1112.02,-381.28"/>
<text xml:space="preserve" text-anchor="middle" x="1123" y="-350.97" font-family="Helvetica,Arial,sans-serif" font-size="10.00">HTTP 400?</text>
<text xml:space="preserve" text-anchor="middle" x="1123" y="-339.72" font-family="Helvetica,Arial,sans-serif" font-size="10.00">(duplicate IP)</text>
</g>
<!-- o_post&#45;&gt;o_400 -->
<g id="edge46" class="edge">
<title>o_post&#45;&gt;o_400</title>
<path fill="none" stroke="#555555" d="M1122.25,-434.86C1122.36,-423.02 1122.48,-409.02 1122.6,-395.86"/>
<polygon fill="#555555" stroke="#555555" points="1125.4,-396 1122.67,-387.97 1119.8,-395.95 1125.4,-396"/>
</g>
<!-- o_warn -->
<g id="node39" class="node">
<title>o_warn</title>
<path fill="#fff9c4" stroke="#856404" d="M1208.34,-248.5C1208.34,-248.5 1037.66,-248.5 1037.66,-248.5 1031.66,-248.5 1025.66,-242.5 1025.66,-236.5 1025.66,-236.5 1025.66,-224.5 1025.66,-224.5 1025.66,-218.5 1031.66,-212.5 1037.66,-212.5 1037.66,-212.5 1208.34,-212.5 1208.34,-212.5 1214.34,-212.5 1220.34,-218.5 1220.34,-224.5 1220.34,-224.5 1220.34,-236.5 1220.34,-236.5 1220.34,-242.5 1214.34,-248.5 1208.34,-248.5"/>
<text xml:space="preserve" text-anchor="middle" x="1123" y="-226.62" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_warn: IP may already exist — skip</text>
</g>
<!-- o_400&#45;&gt;o_warn -->
<g id="edge47" class="edge">
<title>o_400&#45;&gt;o_warn</title>
<path fill="none" stroke="#555555" d="M1123,-311.93C1123,-294.53 1123,-274.06 1123,-258.12"/>
<polygon fill="#555555" stroke="#555555" points="1125.8,-258.37 1123,-250.37 1120.2,-258.37 1125.8,-258.37"/>
<text xml:space="preserve" text-anchor="middle" x="1130.12" y="-279.77" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- o_jrnl2 -->
<g id="node40" class="node">
<title>o_jrnl2</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M1218.21,-139.05C1218.21,-139.05 1037.79,-139.05 1037.79,-139.05 1031.79,-139.05 1025.79,-133.05 1025.79,-127.05 1025.79,-127.05 1025.79,-102.9 1025.79,-102.9 1025.79,-96.9 1031.79,-90.9 1037.79,-90.9 1037.79,-90.9 1218.21,-90.9 1218.21,-90.9 1224.21,-90.9 1230.21,-96.9 1230.21,-102.9 1230.21,-102.9 1230.21,-127.05 1230.21,-127.05 1230.21,-133.05 1224.21,-139.05 1218.21,-139.05"/>
<text xml:space="preserve" text-anchor="middle" x="1128" y="-122.35" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="1128" y="-111.1" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=info &#160;&quot;IP assigned to interface bmc&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="1128" y="-99.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- o_400&#45;&gt;o_jrnl2 -->
<g id="edge48" class="edge">
<title>o_400&#45;&gt;o_jrnl2</title>
<path fill="none" stroke="#555555" d="M1161.85,-329.2C1189.27,-313.4 1223.89,-288.11 1240,-254.57 1249.27,-235.29 1249.23,-225.73 1240,-206.42 1227.61,-180.5 1203.77,-159.62 1181.26,-144.48"/>
<polygon fill="#555555" stroke="#555555" points="1182.87,-142.2 1174.64,-140.19 1179.83,-146.9 1182.87,-142.2"/>
<text xml:space="preserve" text-anchor="middle" x="1252.19" y="-226.82" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- o_warn&#45;&gt;o_jrnl2 -->
<g id="edge49" class="edge">
<title>o_warn&#45;&gt;o_jrnl2</title>
<path fill="none" stroke="#555555" d="M1123.76,-212.26C1124.5,-195.44 1125.64,-169.45 1126.56,-148.7"/>
<polygon fill="#555555" stroke="#555555" points="1129.35,-148.92 1126.91,-140.81 1123.76,-148.68 1129.35,-148.92"/>
</g>
<!-- o_jrnl2&#45;&gt;done -->
<g id="edge50" class="edge">
<title>o_jrnl2&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M1039.11,-82.9C1032.67,-80.92 1026.25,-79.02 1020,-77.27 942.34,-55.6 850.01,-36.83 797.68,-26.83"/>
<polygon fill="#555555" stroke="#555555" points="798.26,-24.09 789.88,-25.35 797.21,-29.59 798.26,-24.09"/>
</g>
<!-- d_post -->
<g id="node42" class="node">
<title>d_post</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M749.09,-494.52C749.09,-494.52 588.91,-494.52 588.91,-494.52 582.91,-494.52 576.91,-488.52 576.91,-482.52 576.91,-482.52 576.91,-447.12 576.91,-447.12 576.91,-441.12 582.91,-435.12 588.91,-435.12 588.91,-435.12 749.09,-435.12 749.09,-435.12 755.09,-435.12 761.09,-441.12 761.09,-447.12 761.09,-447.12 761.09,-482.52 761.09,-482.52 761.09,-488.52 755.09,-494.52 749.09,-494.52"/>
<text xml:space="preserve" text-anchor="middle" x="669" y="-477.82" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/ipam/ip&#45;addresses/</text>
<text xml:space="preserve" text-anchor="middle" x="669" y="-466.57" font-family="Helvetica,Arial,sans-serif" font-size="10.00">address=IP/PREFIX · status=active</text>
<text xml:space="preserve" text-anchor="middle" x="669" y="-455.32" font-family="Helvetica,Arial,sans-serif" font-size="10.00">assigned to bmc interface</text>
<text xml:space="preserve" text-anchor="middle" x="669" y="-444.07" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- d_log&#45;&gt;d_post -->
<g id="edge51" class="edge">
<title>d_log&#45;&gt;d_post</title>
<path fill="none" stroke="#555555" d="M679.97,-562.24C678.2,-546.71 675.58,-523.66 673.34,-504"/>
<polygon fill="#555555" stroke="#555555" points="676.14,-503.8 672.45,-496.16 670.57,-504.43 676.14,-503.8"/>
</g>
<!-- d_400 -->
<g id="node43" class="node">
<title>d_400</title>
<path fill="#fff3cd" stroke="#856404" d="M658.02,-381.28C658.02,-381.28 596.31,-354.07 596.31,-354.07 590.82,-351.65 590.82,-346.8 596.31,-344.38 596.31,-344.38 658.02,-317.17 658.02,-317.17 663.51,-314.75 674.49,-314.75 679.98,-317.17 679.98,-317.17 741.69,-344.38 741.69,-344.38 747.18,-346.8 747.18,-351.65 741.69,-354.07 741.69,-354.07 679.98,-381.28 679.98,-381.28 674.49,-383.7 663.51,-383.7 658.02,-381.28"/>
<text xml:space="preserve" text-anchor="middle" x="669" y="-350.97" font-family="Helvetica,Arial,sans-serif" font-size="10.00">HTTP 400?</text>
<text xml:space="preserve" text-anchor="middle" x="669" y="-339.72" font-family="Helvetica,Arial,sans-serif" font-size="10.00">(duplicate IP)</text>
</g>
<!-- d_post&#45;&gt;d_400 -->
<g id="edge52" class="edge">
<title>d_post&#45;&gt;d_400</title>
<path fill="none" stroke="#555555" d="M669,-434.86C669,-423.02 669,-409.02 669,-395.86"/>
<polygon fill="#555555" stroke="#555555" points="671.8,-395.97 669,-387.97 666.2,-395.97 671.8,-395.97"/>
</g>
<!-- d_warn -->
<g id="node44" class="node">
<title>d_warn</title>
<path fill="#fff9c4" stroke="#856404" d="M658.34,-248.5C658.34,-248.5 487.67,-248.5 487.67,-248.5 481.67,-248.5 475.67,-242.5 475.67,-236.5 475.67,-236.5 475.67,-224.5 475.67,-224.5 475.67,-218.5 481.67,-212.5 487.67,-212.5 487.67,-212.5 658.34,-212.5 658.34,-212.5 664.34,-212.5 670.34,-218.5 670.34,-224.5 670.34,-224.5 670.34,-236.5 670.34,-236.5 670.34,-242.5 664.34,-248.5 658.34,-248.5"/>
<text xml:space="preserve" text-anchor="middle" x="573" y="-226.62" font-family="Helvetica,Arial,sans-serif" font-size="10.00">log_warn: IP may already exist — skip</text>
</g>
<!-- d_400&#45;&gt;d_warn -->
<g id="edge53" class="edge">
<title>d_400&#45;&gt;d_warn</title>
<path fill="none" stroke="#555555" d="M647.22,-321.74C631,-302.02 609.03,-275.31 593.21,-256.07"/>
<polygon fill="#555555" stroke="#555555" points="595.46,-254.41 588.22,-250.01 591.14,-257.96 595.46,-254.41"/>
<text xml:space="preserve" text-anchor="middle" x="625.25" y="-279.77" font-family="Helvetica,Arial,sans-serif" font-size="9.00">yes</text>
</g>
<!-- d_jrnl -->
<g id="node45" class="node">
<title>d_jrnl</title>
<path fill="#ddc9f7" stroke="#6625a8" d="M733.21,-139.05C733.21,-139.05 552.79,-139.05 552.79,-139.05 546.79,-139.05 540.79,-133.05 540.79,-127.05 540.79,-127.05 540.79,-102.9 540.79,-102.9 540.79,-96.9 546.79,-90.9 552.79,-90.9 552.79,-90.9 733.21,-90.9 733.21,-90.9 739.21,-90.9 745.21,-96.9 745.21,-102.9 745.21,-102.9 745.21,-127.05 745.21,-127.05 745.21,-133.05 739.21,-139.05 733.21,-139.05"/>
<text xml:space="preserve" text-anchor="middle" x="643" y="-122.35" font-family="Helvetica,Arial,sans-serif" font-size="10.00">POST /api/extras/journal&#45;entries/</text>
<text xml:space="preserve" text-anchor="middle" x="643" y="-111.1" font-family="Helvetica,Arial,sans-serif" font-size="10.00">kind=info &#160;&quot;IP assigned to interface bmc&quot;</text>
<text xml:space="preserve" text-anchor="middle" x="643" y="-99.85" font-family="Helvetica,Arial,sans-serif" font-size="10.00">timeout 20 s</text>
</g>
<!-- d_400&#45;&gt;d_jrnl -->
<g id="edge54" class="edge">
<title>d_400&#45;&gt;d_jrnl</title>
<path fill="none" stroke="#555555" d="M680.5,-316.92C689.53,-287.98 699.15,-243.9 690,-206.42 684.87,-185.45 673.96,-163.92 663.93,-147.13"/>
<polygon fill="#555555" stroke="#555555" points="666.48,-145.92 659.9,-140.58 661.71,-148.86 666.48,-145.92"/>
<text xml:space="preserve" text-anchor="middle" x="698.95" y="-226.82" font-family="Helvetica,Arial,sans-serif" font-size="9.00">no</text>
</g>
<!-- d_warn&#45;&gt;d_jrnl -->
<g id="edge55" class="edge">
<title>d_warn&#45;&gt;d_jrnl</title>
<path fill="none" stroke="#555555" d="M583.63,-212.26C594.23,-195.06 610.76,-168.26 623.68,-147.3"/>
<polygon fill="#555555" stroke="#555555" points="626.01,-148.86 627.82,-140.59 621.24,-145.93 626.01,-148.86"/>
</g>
<!-- d_jrnl&#45;&gt;done -->
<g id="edge56" class="edge">
<title>d_jrnl&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M680.02,-82.9C696.75,-68.87 716.06,-52.65 731.03,-40.09"/>
<polygon fill="#555555" stroke="#555555" points="732.76,-42.3 737.09,-35.01 729.16,-38.01 732.76,-42.3"/>
</g>
<!-- x_jrnl&#45;&gt;done -->
<g id="edge57" class="edge">
<title>x_jrnl&#45;&gt;done</title>
<path fill="none" stroke="#555555" d="M825.27,-77.28C810.19,-64.62 793.83,-50.88 780.79,-39.94"/>
<polygon fill="#555555" stroke="#555555" points="783.02,-38.16 775.09,-35.16 779.42,-42.44 783.02,-38.16"/>
</g>
</g>
</svg>
